!function(){"use strict";function e(e,t){var s,n=this,i=Object.keys(e),r=i.length;void 0!==t?this.debug=!0:this.hasOwnProperty("debug")&&this.debug===!0||(this.debug=!1);for(var o=0;o<r;o++)s=i[o],n.stick(s,e[s])}window.MutationObserver=function(){return window.MutationObserver||window.webkitMutationObserver||void 0}(),window.BoundObject=e,e.prototype.handleMutations=function(e,t,s){e.forEach(function(e){if(e.removedNodes&&e.removedNodes.length&&e.addedNodes&&e.addedNodes.length){e.removedNodes[0].data!==e.addedNodes[0].data&&(s.debug&&console.debug("handleMutations()",t,s[t],e.addedNodes[0].data),s[t]=e.addedNodes[0].data)}})},e.prototype.handleChange=function(e,t,s,n){n.debug&&console.debug("handleChange",n[t],s.value),n.set(t,s.value)},e.prototype.stick=function(e,t,s){void 0===s&&(s="textContent");var n=this;if(n.debug&&console.debug("stick()",e,t),n._bindings=n._bindings||{},n._bindings[e]=n._bindings[e]||[],n._bindings[e].push([t,s]),"INPUT"===t.tagName){var i=function(s){return n.handleChange(s,e,t,n)};t.addEventListener("change",i,!1),n._listeners=n._listeners||{},n._listeners[e]=n._listeners[e]||[],n._listeners[e].push([t,i])}else{var r=new window.MutationObserver(function(t){n.handleMutations(t,e,n)});r.observe(t,{attributes:!1,characterData:!0,childList:!0,subtree:!1}),n._observers=n._observers||{},n._observers[e]=r}return n.hasOwnProperty(e)?n.set(e,n[e]):n[e]=t[s],n},e.prototype.unstick=function(e,t,s){var n=this;if(void 0===s&&(s="textContent"),t){var i=this._bindings[e];if(i&&i.length)for(var r=0;r<i.length;r++){var o=i[r],d=o[0],a=o[1];d===t&&a===s&&n._bindings[e].splice(r,1)}if(this._listeners){var h=this._listeners[e];if(h&&h.length)for(var u=0;u<h.length;u++){var b=h[u][0];b===t&&n._listeners[e].splice(u,1)}}}else this._bindings[e]=[],this._listeners&&this._listeners[e]&&(this._listeners[e].forEach(function(e){var t=e[0],s=e[1];return t.removeEventListener("change",s)}),this._listeners[e]=[]);if(this._observers.hasOwnProperty(e)){var g=this._observers[e];this.handleMutations(g.takeRecords(),e,this),g.disconnect(),g=null,delete this._observers[e]}},e.prototype.set=function(e,t){if(this[e]=t,this._bindings.hasOwnProperty(e))for(var s=this._bindings[e],n=0;n<s.length;n++){var i=s[n],r=i[0],o=i[1];r[o]=t}else this.debug&&console.debug("No target!",this._bindings,this._bindings.hasOwnProperty(e),Object.keys(this._bindings));return t},e.prototype.get=function(e){return this[e]},e.prototype.hasFired=function(e){for(var t=this,s=this._observers[e],n=this._bindings[e],i=n[0],r=s.takeRecords(),o=r.length,d=!0,a=0;a<o;a++){r[a].target===i&&(d=!1)}return t.handleMutations(r,e,t),d}}();
