/*! boundobject.js - v0.1.0 - 2013-08-25 */
var MicroEvent=function(){};MicroEvent.prototype={bind:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},unbind:function(a,b){this._events=this._events||{},a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(a){for(var b=["bind","unbind","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=MicroEvent.prototype[b[c]]},"undefined"!=typeof module&&"exports"in module&&(module.exports=MicroEvent),function(a,b){"use strict";a.MutationObserver=function(){return a.MutationObserver||a.webkitMutationObserver||void 0}();var c=function(a,b){var c,d=this,e=Object.keys(a),f=e.length;void 0!==b?this.debug=!0:this.hasOwnProperty("debug")&&this.debug===!0||(this.debug=!1),this.bind("change",function(a,b){d.debug&&console.debug("on:change",a,b),d[a]=b});for(var g=0;f>g;g++)c=e[g],this.stick(c,a[c])};c.prototype.handleMutations=function(a,b,c){a.forEach(function(a){var d=a.removedNodes[0].data,e=a.addedNodes[0].data;d!==e&&c.trigger("change",b,a.addedNodes[0].data)})},c.prototype.stick=function(a,b){var c=this;this.debug&&console.debug("stick()",a,b);var d=new MutationObserver(function(b){c.handleMutations(b,a,c)});return d.observe(b,{attributes:!1,characterData:!0,childList:!0,subtree:!1}),c._bindings=c._bindings||{},c._bindings[a]=b,c._observers=c._observers||{},c._observers[a]=d,c.hasOwnProperty(a)?c.set(a,c[a]):c[a]=b.textContent,c},c.prototype.unstick=function(a){var b,c,d=[];void 0!==a?d.push(a):d=Object.keys(this._bindings),c=d.length;for(var e=0;c>e;e++)a=d[e],this._bindings.hasOwnProperty(a)&&delete this._bindings[a],this._observers.hasOwnProperty(a)&&(b=this._observers[a],this.handleMutations(b.takeRecords(),a,this),b.disconnect(),delete this._observers[a])},c.prototype.set=function(a,b){var c;return this._bindings.hasOwnProperty(a)&&(c=this._bindings[a]),void 0!==c?c.textContent=b:this.debug&&console.debug("No target!",this._bindings,this._bindings.hasOwnProperty(a),Object.keys(this._bindings)),this[a]=b,b},c.prototype.get=function(a){return this[a]},c.prototype.hasFired=function(a){for(var b=this,c=this._observers[a],d=this._bindings[a],e=c.takeRecords(),f=e.length,g=!0,h=0;f>h;h++){var i=e[h];i.target===d&&(g=!1)}return b.handleMutations(e,a,b),g},b.mixin(c),a.BoundObject=c}(window,MicroEvent);